import{j as e}from"./index-D8qOLjzl.js";import{a as r,r as a,u as t,L as s}from"./router-BngDsYxN.js";import{c as l}from"./index-DCdKxP6z.js";import"./vendor-qOSuyabr.js";const o=l("https://dfjjsnoxkrmfrmksxfqm.supabase.co","sb_publishable_u1NZrF_BN2sDbJ4KyzOoNQ_krxzo2bb");function n(){const{id:l}=r(),[n,i]=a.useState({title:"",slug:"",excerpt:"",content:"",featured_image:"",status:"draft",category_id:""}),[c,d]=a.useState([]),[g,x]=a.useState(!1),[u,p]=a.useState(!0),m=t();a.useEffect(()=>{b(),h(),l&&f()},[l]);const b=async()=>{const{data:{user:e}}=await o.auth.getUser();e||m("/admin/login")},h=async()=>{try{const{data:e,error:r}=await o.from("categories").select("*").eq("category_type","blog").order("name");if(r)throw r;d(e||[])}catch(e){}},f=async()=>{try{const{data:e,error:r}=await o.from("posts").select("*").eq("id",l).single();if(r)throw r;e&&i({title:e.title||"",slug:e.slug||"",excerpt:e.excerpt||"",content:e.content||"",featured_image:e.featured_image||"",status:e.status||"draft",category_id:e.category_id?e.category_id.toString():""})}catch(e){alert("Blog yazısı bulunamadı!"),m("/admin/posts")}finally{p(!1)}},y=e=>e.toLowerCase().replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ı/g,"i").replace(/ö/g,"o").replace(/ç/g,"c").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");return u?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"Blog yazısı yükleniyor..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-lg border-b-4 border-blue-500 sticky top-0 z-50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(s,{to:"/admin",className:"flex items-center group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 via-purple-500 to-teal-500 rounded-xl flex items-center justify-center shadow-xl transform group-hover:scale-105 transition-all duration-300",children:e.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-transparent bg-gradient-to-br from-blue-600 to-purple-600 bg-clip-text font-bold text-lg",children:"E"})})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-orange-400 to-pink-500 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"flex flex-col ml-4",children:[e.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-teal-600 bg-clip-text text-transparent",children:"EpikTasarım"}),e.jsx("span",{className:"text-sm text-blue-600 font-bold tracking-wider bg-blue-100 px-2 py-1 rounded",children:"YÖNETİM PANELİ"})]})]})}),e.jsxs(s,{to:"/admin/posts",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-arrow-left-line text-xl"}),"Blog Yazılarına Dön"]})]})})}),e.jsx("header",{className:"bg-white shadow-lg border-b-4 border-orange-500",children:e.jsx("div",{className:"px-8 py-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"✏️ Blog Yazısı Düzenle"}),e.jsx("p",{className:"text-gray-600 text-xl",children:"Blog yazısını güncelleyin"})]})})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("form",{onSubmit:async e=>{e.preventDefault(),x(!0);try{const e={...n,slug:n.slug||y(n.title),category_id:n.category_id||null},{error:r}=await o.from("posts").update(e).eq("id",l);if(r)throw r;m("/admin/posts")}catch(r){alert("Blog yazısı güncellenirken bir hata oluştu!")}finally{x(!1)}},className:"bg-white rounded-xl shadow-xl p-8 border-4 border-orange-200",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Başlık *"}),e.jsx("input",{type:"text",value:n.title,onChange:e=>{i({...n,title:e.target.value,slug:y(e.target.value)})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg",placeholder:"Blog yazısı başlığı",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"URL Slug"}),e.jsx("input",{type:"text",value:n.slug,onChange:e=>i({...n,slug:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg",placeholder:"url-slug"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Kategori"}),e.jsxs("select",{value:n.category_id,onChange:e=>i({...n,category_id:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg pr-8",children:[e.jsx("option",{value:"",children:"Kategori seçin"}),c.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Öne Çıkan Görsel URL"}),e.jsx("input",{type:"url",value:n.featured_image,onChange:e=>i({...n,featured_image:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg",placeholder:"https://example.com/image.jpg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Özet *"}),e.jsx("textarea",{value:n.excerpt,onChange:e=>i({...n,excerpt:e.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg",placeholder:"Blog yazısının kısa özeti",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"İçerik *"}),e.jsx("textarea",{value:n.content,onChange:e=>i({...n,content:e.target.value}),rows:15,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg",placeholder:"Blog yazısının tam içeriği",required:!0})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"published",checked:"published"===n.status,onChange:e=>i({...n,status:e.target.checked?"published":"draft"}),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("label",{htmlFor:"published",className:"text-lg font-bold text-gray-700 cursor-pointer",children:"Yayında"})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsxs("button",{type:"submit",disabled:g,className:"flex items-center gap-2 px-8 py-4 bg-orange-600 text-white rounded-lg font-bold hover:bg-orange-700 transition-colors cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed text-lg",children:[e.jsx("i",{className:(g?"ri-loader-4-line animate-spin":"ri-save-line")+" text-xl"}),g?"Güncelleniyor...":"Güncelle"]}),e.jsxs(s,{to:"/admin/posts",className:"flex items-center gap-2 px-8 py-4 bg-gray-500 text-white rounded-lg font-bold hover:bg-gray-600 transition-colors cursor-pointer whitespace-nowrap text-lg",children:[e.jsx("i",{className:"ri-close-line text-xl"}),"İptal"]})]})]})})})]})}export{n as default};
