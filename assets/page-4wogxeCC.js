import{j as e}from"./index-D8qOLjzl.js";import{u as r,r as t}from"./router-BngDsYxN.js";import{s as a}from"./supabase-Cx8sYzrH.js";import"./vendor-qOSuyabr.js";import"./index-DCdKxP6z.js";function l(){const l=r(),[s,i]=t.useState(!1),[n,o]=t.useState(null),[d,c]=t.useState({title:"",slug:"",description:"",price:"",image_url:"",download_link:"",features:[""],is_active:!0});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Yeni Ürün Ekle"}),e.jsx("p",{className:"text-gray-600",children:"Satış için yeni bir ürün oluşturun"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),i(!0);try{if(!d.title.trim())return alert("Ürün adı gereklidir"),void i(!1);if(!d.price||parseFloat(d.price)<=0)return alert("Geçerli bir fiyat giriniz"),void i(!1);if(!d.description.trim())return alert("Ürün açıklaması gereklidir"),void i(!1);const e={title:d.title.trim(),slug:d.slug.trim(),description:d.description.trim(),price:parseFloat(d.price),image_url:d.image_url.trim()||null,download_link:d.download_link.trim()||null,features:d.features.filter(e=>""!==e.trim()),is_active:d.is_active},{data:r,error:t}=await a.from("products").insert([e]).select();if(t)throw t;alert("Ürün başarıyla eklendi!"),l("/admin/urunler")}catch(r){alert(`Ürün eklenirken bir hata oluştu: ${r.message||"Bilinmeyen hata"}`)}finally{i(!1)}},className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ürün Adı *"}),e.jsx("input",{type:"text",required:!0,value:d.title,onChange:e=>{return r=e.target.value,void c({...d,title:r,slug:(t=r,t.toLowerCase().replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ı/g,"i").replace(/ö/g,"o").replace(/ç/g,"c").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim())});var r,t},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ürün adını girin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Slug *"}),e.jsx("input",{type:"text",required:!0,value:d.slug,onChange:e=>c({...d,slug:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"urun-adi"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"URL'de görünecek isim (otomatik oluşturulur)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fiyat (₺) *"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:d.price,onChange:e=>c({...d,price:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama *"}),e.jsx("textarea",{required:!0,rows:4,value:d.description,onChange:e=>c({...d,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ürün açıklamasını girin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Görsel URL"}),e.jsx("input",{type:"url",value:d.image_url,onChange:e=>c({...d,image_url:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Boş bırakılırsa otomatik görsel oluşturulur"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"download_link",className:"block text-sm font-medium text-gray-700 mb-2",children:"Satın Alma Linki"}),e.jsx("input",{type:"url",id:"download_link",value:d.download_link,onChange:e=>c({...d,download_link:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/download"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ürün satın alındıktan sonra yönlendirilecek indirme linki"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"product_file",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ürün Dosyası (ZIP)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[e.jsx("input",{type:"file",id:"product_file",accept:".zip,.rar",onChange:e=>{const r=e.target.files?.[0];if(r){if(r.size>52428800)return void alert("Dosya boyutu 50MB'dan büyük olamaz");o(r)}},className:"hidden"}),e.jsxs("label",{htmlFor:"product_file",className:"cursor-pointer",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-upload-cloud-2-line text-2xl text-blue-600"})}),e.jsx("p",{className:"text-gray-600 mb-2",children:"ZIP dosyasını buraya sürükleyin veya seçin"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Maksimum dosya boyutu: 50MB"})]}),n&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("i",{className:"ri-file-zip-line text-green-600 mr-2"}),e.jsx("span",{className:"text-green-700 font-medium",children:n.name})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Özellikler"}),e.jsxs("div",{className:"space-y-2",children:[d.features.map((r,t)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:r,onChange:e=>((e,r)=>{const t=[...d.features];t[e]=r,c({...d,features:t})})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Özellik açıklaması"}),d.features.length>1&&e.jsx("button",{type:"button",onClick:()=>(e=>{c({...d,features:d.features.filter((r,t)=>t!==e)})})(t),className:"w-8 h-8 flex items-center justify-center text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-delete-bin-line"})})]},t)),e.jsxs("button",{type:"button",onClick:()=>{c({...d,features:[...d.features,""]})},className:"text-blue-600 hover:text-blue-800 text-sm font-medium cursor-pointer",children:[e.jsx("i",{className:"ri-add-line mr-1"}),"Özellik Ekle"]})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.is_active,onChange:e=>c({...d,is_active:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Ürünü aktif olarak yayınla"})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t",children:[e.jsx("button",{type:"button",onClick:()=>l("/admin/urunler"),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap cursor-pointer",children:"İptal"}),e.jsx("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer",children:s?"Kaydediliyor...":"Ürünü Kaydet"})]})]})})]})}export{l as default};
