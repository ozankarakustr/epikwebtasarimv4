import{j as e}from"./index-D8qOLjzl.js";import{u as t,r as s}from"./router-BngDsYxN.js";import{c as a}from"./index-DCdKxP6z.js";import"./vendor-qOSuyabr.js";const r=a("https://dfjjsnoxkrmfrmksxfqm.supabase.co","sb_publishable_u1NZrF_BN2sDbJ4KyzOoNQ_krxzo2bb");function l(){const a=t(),[l,i]=s.useState([]),[n,c]=s.useState(!0),[o,d]=s.useState("all");s.useEffect(()=>{x(),m()},[]);const x=async()=>{const{data:{user:e}}=await r.auth.getUser();e||a("/admin")},m=async()=>{try{const{data:e,error:t}=await r.from("posts").select("\n          *,\n          categories (\n            name\n          )\n        ").order("created_at",{ascending:!1});if(t)throw t;i(e||[])}catch(e){}finally{c(!1)}},h="all"===o?l:l.filter(e=>e.status===o),p=e=>e.categories?.name?e.categories.name:e.category||"Kategori Yok";return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-loader-4-line text-4xl text-teal-600 animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Yükleniyor..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>a("/admin"),className:"text-gray-600 hover:text-gray-900 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-arrow-left-line text-2xl"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Blog Yazıları"})]}),e.jsxs("button",{onClick:()=>a("/admin/posts/new"),className:"flex items-center gap-2 bg-teal-600 text-white px-6 py-3 rounded-full font-medium hover:bg-teal-700 transition-colors shadow-lg whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Yeni Yazı"]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>d("all"),className:"px-4 py-2 rounded-full font-medium transition-all whitespace-nowrap cursor-pointer "+("all"===o?"bg-teal-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Tümü (",l.length,")"]}),e.jsxs("button",{onClick:()=>d("published"),className:"px-4 py-2 rounded-full font-medium transition-all whitespace-nowrap cursor-pointer "+("published"===o?"bg-teal-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Yayında (",l.filter(e=>"published"===e.status).length,")"]}),e.jsxs("button",{onClick:()=>d("draft"),className:"px-4 py-2 rounded-full font-medium transition-all whitespace-nowrap cursor-pointer "+("draft"===o?"bg-teal-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Taslak (",l.filter(e=>"draft"===e.status).length,")"]})]})}),0===h.length?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("i",{className:"ri-article-line text-6xl text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg mb-6",children:"Henüz yazı bulunmuyor"}),e.jsxs("button",{onClick:()=>a("/admin/posts/new"),className:"inline-flex items-center gap-2 bg-teal-600 text-white px-6 py-3 rounded-full font-medium hover:bg-teal-700 transition-colors whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-add-line"}),"İlk Yazınızı Oluşturun"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Başlık"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Kategori"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Durum"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Tarih"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-900",children:"İşlemler"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:h.map(t=>{return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500",children:t.slug})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-block bg-teal-100 text-teal-700 px-3 py-1 rounded-full text-sm font-medium",children:p(t)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium "+("published"===t.status?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"),children:"published"===t.status?"Yayında":"Taslak"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:(s=t.published_at||t.created_at,new Date(s).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric"}))}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>a(`/admin/posts/edit/${t.id}`),className:"w-9 h-9 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-lg transition-colors cursor-pointer",title:"Düzenle",children:e.jsx("i",{className:"ri-edit-line text-lg"})}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("Bu yazıyı silmek istediğinizden emin misiniz?"))try{const{error:t}=await r.from("posts").delete().eq("id",e);if(t)throw t;m()}catch(t){alert("Yazı silinirken bir hata oluştu")}})(t.id),className:"w-9 h-9 flex items-center justify-center text-red-600 hover:bg-red-50 rounded-lg transition-colors cursor-pointer",title:"Sil",children:e.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})})]},t.id);var s})})]})})]})})]})}export{l as default};
