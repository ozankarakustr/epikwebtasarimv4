import{j as e}from"./index-D8qOLjzl.js";import{u as r,a as t,r as a}from"./router-BngDsYxN.js";import{c as s}from"./index-DCdKxP6z.js";import"./vendor-qOSuyabr.js";const l=s("https://dfjjsnoxkrmfrmksxfqm.supabase.co","sb_publishable_u1NZrF_BN2sDbJ4KyzOoNQ_krxzo2bb"),i=e=>e.toLowerCase().replace(/ç/g,"c").replace(/ğ/g,"g").replace(/ı/g,"i").replace(/ö/g,"o").replace(/ş/g,"s").replace(/ü/g,"u").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-");function o(){const s=r(),{id:o}=t(),[n,c]=a.useState(!0),[d,m]=a.useState(!1),[x,g]=a.useState(""),[u,p]=a.useState({title:"",slug:"",description:"",image:"",project_url:"",category:"",technologies:"",featured:!1,client_name:""});a.useEffect(()=>{h(),b()},[o]);const h=async()=>{const{data:{user:e}}=await l.auth.getUser();e||s("/admin")},b=async()=>{try{const{data:e,error:r}=await l.from("projects").select("*").eq("id",o).single();if(r)throw r;e&&(p({title:e.title,slug:e.slug||i(e.title),description:e.description,image:e.image,project_url:e.project_url||"",category:e.category,technologies:Array.isArray(e.technologies)?e.technologies.join(", "):e.technologies||"",featured:e.featured||!1,client_name:e.client_name||""}),g(e.image||""))}catch(e){alert("Proje yüklenirken bir hata oluştu"),s("/admin/projects")}finally{c(!1)}},j=e=>{const{name:r,value:t,type:a}=e.target;p(s=>({...s,[r]:"checkbox"===a?e.target.checked:t})),"image"===r&&g(t)};return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-loader-4-line text-4xl text-teal-600 animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Yükleniyor..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/admin/projects"),className:"text-gray-600 hover:text-gray-900 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-arrow-left-line text-2xl"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Projeyi Düzenle"})]})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),m(!0);try{const e=u.technologies.split(",").map(e=>e.trim()).filter(e=>e);let r=u.slug;r&&""!==r.trim()||(r=i(u.title));const{error:t}=await l.from("projects").update({...u,slug:r,technologies:e}).eq("id",o);if(t)throw t;alert("Proje başarıyla güncellendi!"),s("/admin/projects")}catch(r){alert("Proje güncellenirken bir hata oluştu")}finally{m(!1)}},className:"bg-white rounded-2xl shadow-md p-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Proje Adı *"}),e.jsx("input",{type:"text",name:"title",value:u.title,onChange:e=>{const r=e.target.value,t=i(r);p(e=>({...e,title:r,slug:t}))},required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",placeholder:"Proje adı"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"URL Slug *"}),e.jsx("input",{type:"text",name:"slug",value:u.slug,onChange:j,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",placeholder:"proje-url-slug"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Bu alan otomatik doldurulur, gerekirse düzenleyebilirsiniz"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Açıklama *"}),e.jsx("textarea",{name:"description",value:u.description,onChange:j,required:!0,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm resize-none",placeholder:"Proje açıklaması"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Kategori *"}),e.jsx("input",{type:"text",name:"category",value:u.category,onChange:j,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",placeholder:"E-ticaret"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Müşteri Adı"}),e.jsx("input",{type:"text",name:"client_name",value:u.client_name,onChange:j,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",placeholder:"Müşteri adı"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Teknolojiler *"}),e.jsx("input",{type:"text",name:"technologies",value:u.technologies,onChange:j,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",placeholder:"WordPress, PHP, MySQL"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Proje URL'si"}),e.jsx("input",{type:"url",name:"project_url",value:u.project_url,onChange:j,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Proje Görseli *"}),e.jsx("input",{type:"url",name:"image",value:u.image,onChange:j,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",placeholder:"https://example.com/image.jpg"}),e.jsx("div",{className:"mt-4 border-2 border-dashed border-gray-300 rounded-lg overflow-hidden bg-gray-50",children:x?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:x,alt:"Proje görseli önizleme",className:"w-full h-64 object-cover",onError:e=>{e.target.src="https://readdy.ai/api/search-image?query=modern%20web%20design%20project%20showcase%20with%20clean%20minimalist%20background%2C%20professional%20technology%20interface%2C%20gradient%20blue%20and%20purple%20colors%2C%20high%20quality%20digital%20illustration&width=800&height=400&seq=project-placeholder-001&orientation=landscape"}}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all flex items-center justify-center",children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("i",{className:"ri-image-line text-4xl text-white drop-shadow-lg"})})})]}):e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-gray-400",children:[e.jsx("i",{className:"ri-image-add-line text-6xl mb-3"}),e.jsx("p",{className:"text-sm font-medium",children:"Görsel URL'si girin"}),e.jsx("p",{className:"text-xs mt-1",children:"Önizleme burada görünecek"})]})}),e.jsxs("p",{className:"mt-2 text-xs text-gray-5",children:[e.jsx("i",{className:"ri-information-line mr-1"}),"Görsel URL'sini yukarıdaki alana yapıştırın. Önizleme otomatik olarak görünecektir."]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"featured",name:"featured",checked:u.featured,onChange:j,className:"w-5 h-5 text-teal-600 border-gray-300 rounded focus:ring-teal-500 cursor-pointer"}),e.jsx("label",{htmlFor:"featured",className:"text-sm font-semibold text-gray-900 cursor-pointer",children:"Öne Çıkarılsın"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>s("/admin/projects"),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-full font-medium hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer",children:"İptal"}),e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-6 py-3 bg-teal-600 text-white rounded-full font-medium hover:bg-teal-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer",children:d?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Güncelleniyor..."]}):"Güncelle"})]})]})})]})}export{o as default};
