import{j as e}from"./index-D8qOLjzl.js";import{r as t,u as s,L as r}from"./router-BngDsYxN.js";import{c as i}from"./index-DCdKxP6z.js";import"./vendor-qOSuyabr.js";const a=i("https://dfjjsnoxkrmfrmksxfqm.supabase.co","sb_publishable_u1NZrF_BN2sDbJ4KyzOoNQ_krxzo2bb");function l(){const[i,l]=t.useState([]),[n,c]=t.useState(!0),d=s();t.useEffect(()=>{x(),o()},[]);const x=async()=>{const{data:{user:e}}=await a.auth.getUser();e||d("/admin/login")},o=async()=>{try{const{data:e,error:t}=await a.from("products").select("*").order("created_at",{ascending:!1});if(t)throw t;l(e||[])}catch(e){}finally{c(!1)}};return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-loader-4-line text-4xl text-purple-600 animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Yükleniyor..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>d("/admin"),className:"text-gray-600 hover:text-gray-900 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-arrow-left-line text-2xl"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ürün Yönetimi"})]}),e.jsxs(r,{to:"/admin/products/new",className:"flex items-center gap-2 bg-purple-600 text-white px-6 py-3 rounded-full font-medium hover:bg-purple-700 transition-colors shadow-lg whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Yeni Ürün"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-blue-100 rounded-lg",children:e.jsx("i",{className:"ri-shopping-bag-line text-blue-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Ürün"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-green-100 rounded-lg",children:e.jsx("i",{className:"ri-check-line text-green-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Aktif Ürün"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(e=>e.is_active).length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-red-100 rounded-lg",children:e.jsx("i",{className:"ri-close-line text-red-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pasif Ürün"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(e=>!e.is_active).length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:0===i.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 flex items-center justify-center bg-gray-100 rounded-full mx-auto mb-4",children:e.jsx("i",{className:"ri-shopping-bag-line text-2xl text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz ürün yok"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"İlk ürününüzü ekleyerek başlayın"}),e.jsx(r,{to:"/admin/products/new",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors whitespace-nowrap cursor-pointer",children:"Ürün Ekle"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ürün"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fiyat"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarih"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 flex-shrink-0",children:e.jsx("img",{src:t.image_url||`https://readdy.ai/api/search-image?query=modern%20digital%20product%20software%20technology%20clean%20minimalist%20background&width=100&height=100&seq=${t.id}&orientation=squarish`,alt:t.title,className:"w-12 h-12 rounded-lg object-cover object-top"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500",children:t.slug})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["₺",t.price.toLocaleString("tr-TR")]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>(async(e,t)=>{try{const{error:s}=await a.from("products").update({is_active:!t}).eq("id",e);if(s)throw s;l(i.map(s=>s.id===e?{...s,is_active:!t}:s))}catch(s){}})(t.id,t.is_active),className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium cursor-pointer "+(t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t.is_active?"Aktif":"Pasif"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString("tr-TR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx(r,{to:`/urunler/${t.slug}`,className:"w-8 h-8 flex items-center justify-center text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors cursor-pointer",title:"Görüntüle",children:e.jsx("i",{className:"ri-eye-line text-lg"})}),e.jsx(r,{to:`/admin/products/edit/${t.id}`,className:"w-8 h-8 flex items-center justify-center text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded-lg transition-colors cursor-pointer",title:"Düzenle",children:e.jsx("i",{className:"ri-edit-line text-lg"})}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("Bu ürünü silmek istediğinizden emin misiniz?"))try{const{error:t}=await a.from("products").delete().eq("id",e);if(t)throw t;l(i.filter(t=>t.id!==e))}catch(t){}})(t.id),className:"w-8 h-8 flex items-center justify-center text-red-600 hover:text-red-900 hover:bg-red-50 rounded-lg transition-colors cursor-pointer",title:"Sil",children:e.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})})]},t.id))})]})})})]})]})}export{l as default};
